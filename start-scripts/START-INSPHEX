(DEFINE-FILE-INFO PACKAGE "INTERLISP" READTABLE "INTERLISP" BASE 10)

(FILECREATED "11-Nov-2025 20:45:40" {DSK}<home>frank>il>online>start-scripts>START-INSPHEX.;12 2401   

      :EDIT-BY "FGH"

      :CHANGES-TO (FNS START-INSPHEX)
                  (VARS START-INSPHEXCOMS)
                  (FUNCTIONS TmpShellWget)

      :PREVIOUS-DATE "11-Nov-2025 20:10:15" {DSK}<home>frank>il>online>start-scripts>START-INSPHEX.;11
)


(PRETTYCOMPRINT START-INSPHEXCOMS)

(RPAQQ START-INSPHEXCOMS ((FUNCTIONS TmpShellWget)
                          (FNS START-INSPHEX)
                          (P (START-INSPHEX))))

(CL:DEFUN TmpShellWget (URL OUTFILENAME)
   (LET* ((WGET (ShellWhich "wget"))
          (OUTNAME (OUTFILEP OUTFILENAME))
          (UNIXNAME (LET [(UN (UNIX-FILE-NAME OUTNAME 'OUTPUT]
                         (if (STREQUAL (SUBSTRING UN (NCHARS UN))
                                    ".")
                             then (SUBSTRING UN 1 -2)
                           else UN)))
          (CMD (CONCAT WGET " " URL " -O " UNIXNAME)))
         (if (NULL WGET)
             then (ERROR "ShellWget - wget not available"))
         (ShellCommand CMD)
         OUTNAME))
(DEFINEQ

(START-INSPHEX
  [LAMBDA NIL                                                (* ; "Edited 11-Nov-2025 20:44 by FGH")
                                                             (* ; "Edited  7-Nov-2025 10:43 by FGH")
    (LET* ((INSPHEX.FILE (CONCAT LOGINDIR ">INSPHEX"))
           (INSPHEX.DFASL (CONCAT INSPHEX.FILE ".DFASL")))
          (DIRECTORY INSPHEX.DFASL 'DELETE)
          (DIRECTORY (CONCAT INSPHEX.FILE ".")
                 'DELETE)
          (TmpShellWget "https://raw.githubusercontent.com/pamoroso/insphex/refs/heads/main/INSPHEX"
                 INSPHEX.FILE)
          (SETQ INSPHEX.DFASL (CL:COMPILE-FILE INSPHEX.FILE))
          (LOAD INSPHEX.DFASL)
          (ADD.PROCESS (LIST (CL:FIND-SYMBOL "HEXDUMP" "INSPHEX")
                             (KWOTE INSPHEX.DFASL)
                             '(CREATEW (CREATEREGION (FIX (TIMES 0.35 SCREENWIDTH))
                                              (FIX (TIMES 0.25 SCREENHEIGHT))
                                              (FIX (TIMES 0.5 SCREENWIDTH))
                                              (FIX (TIMES 0.5 SCREENHEIGHT])
)

(START-INSPHEX)
(DECLARE%: DONTCOPY
  (FILEMAP (NIL (623 1216 (TmpShellWget 623 . 1216)) (1217 2357 (START-INSPHEX 1227 . 2355)))))
STOP
